\doxysection{parallel\+\_\+chunk\+::Parallel\+Chunk\+Processor\texorpdfstring{$<$}{<} T \texorpdfstring{$>$}{>} Class Template Reference}
\hypertarget{classparallel__chunk_1_1ParallelChunkProcessor}{}\label{classparallel__chunk_1_1ParallelChunkProcessor}\index{parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}}


Parallel chunk processor for concurrent operations.  




{\ttfamily \#include $<$parallel\+\_\+chunk.\+hpp$>$}

\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor_a23bb62ea1badf84f9595eae0edd5dec5}{Chunk\+Operation}} = std\+::function$<$ void(std\+::vector$<$ T $>$ \&)$>$
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename U $>$ }\\static std\+::vector$<$ std\+::vector$<$ U $>$ $>$ \mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor_a1a5189644af96de911c983b816fa9532}{map}} (const std\+::vector$<$ std\+::vector$<$ T $>$ $>$ \&chunks, std\+::function$<$ U(const T \&)$>$ operation)
\begin{DoxyCompactList}\small\item\em Map operation over chunks in parallel. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor_aceed1c1ad3d73895b53c501195b64adb}{process\+\_\+chunks}} (std\+::vector$<$ std\+::vector$<$ T $>$ $>$ \&chunks, \mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor_a23bb62ea1badf84f9595eae0edd5dec5}{Chunk\+Operation}} operation, size\+\_\+t num\+\_\+threads=std\+::thread\+::hardware\+\_\+concurrency())
\begin{DoxyCompactList}\small\item\em Process chunks in parallel. \end{DoxyCompactList}\item 
static T \mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor_a25c4f81d28c25048dd9845178284a76a}{reduce}} (const std\+::vector$<$ std\+::vector$<$ T $>$ $>$ \&chunks, std\+::function$<$ T(const T \&, const T \&)$>$ operation, T initial)
\begin{DoxyCompactList}\small\item\em Reduce chunks in parallel. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$typename T$>$\newline
class parallel\+\_\+chunk\+::\+Parallel\+Chunk\+Processor$<$ T $>$}
Parallel chunk processor for concurrent operations. 


\begin{DoxyTemplParams}{Template Parameters}
{\em T} & The type of elements to process \\
\hline
\end{DoxyTemplParams}


Definition at line \mbox{\hyperlink{parallel__chunk_8hpp_source_l00017}{17}} of file \mbox{\hyperlink{parallel__chunk_8hpp_source}{parallel\+\_\+chunk.\+hpp}}.



\doxysubsection{Member Typedef Documentation}
\Hypertarget{classparallel__chunk_1_1ParallelChunkProcessor_a23bb62ea1badf84f9595eae0edd5dec5}\label{classparallel__chunk_1_1ParallelChunkProcessor_a23bb62ea1badf84f9595eae0edd5dec5} 
\index{parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}!ChunkOperation@{ChunkOperation}}
\index{ChunkOperation@{ChunkOperation}!parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{ChunkOperation}{ChunkOperation}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
using \mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor}{parallel\+\_\+chunk\+::\+Parallel\+Chunk\+Processor}}$<$ T $>$\+::\+Chunk\+Operation =  std\+::function$<$void(std\+::vector$<$T$>$\&)$>$}



Definition at line \mbox{\hyperlink{parallel__chunk_8hpp_source_l00019}{19}} of file \mbox{\hyperlink{parallel__chunk_8hpp_source}{parallel\+\_\+chunk.\+hpp}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{classparallel__chunk_1_1ParallelChunkProcessor_a1a5189644af96de911c983b816fa9532}\label{classparallel__chunk_1_1ParallelChunkProcessor_a1a5189644af96de911c983b816fa9532} 
\index{parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}!map@{map}}
\index{map@{map}!parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{map()}{map()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
template$<$typename U $>$ \\
static std\+::vector$<$ std\+::vector$<$ U $>$ $>$ \mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor}{parallel\+\_\+chunk\+::\+Parallel\+Chunk\+Processor}}$<$ T $>$\+::map (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ std\+::vector$<$ T $>$ $>$ \&}]{chunks,  }\item[{std\+::function$<$ U(const T \&)$>$}]{operation }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Map operation over chunks in parallel. 


\begin{DoxyParams}{Parameters}
{\em chunks} & Input chunks \\
\hline
{\em operation} & Mapping operation \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Transformed chunks 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{parallel__chunk_8hpp_source_l00053}{53}} of file \mbox{\hyperlink{parallel__chunk_8hpp_source}{parallel\+\_\+chunk.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ std::vector<std::vector<U>>\ result(chunks.size());}
\DoxyCodeLine{00056\ \ \ \ \ \ \ \ \ std::vector<std::future<void>>\ futures;}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ chunks.size();\ ++i)\ \{}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \ \ \ \ futures.push\_back(std::async(std::launch::async,\ [\&,\ i]()\ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result[i].reserve(chunks[i].size());}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::transform(chunks[i].begin(),\ chunks[i].end(),\ std::back\_inserter(result[i]),}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ operation);}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ \}));}
\DoxyCodeLine{00064\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00065\ }
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ future\ :\ futures)\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ \ \ \ \ future.wait();}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00069\ }
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00071\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classparallel__chunk_1_1ParallelChunkProcessor_aceed1c1ad3d73895b53c501195b64adb}\label{classparallel__chunk_1_1ParallelChunkProcessor_aceed1c1ad3d73895b53c501195b64adb} 
\index{parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}!process\_chunks@{process\_chunks}}
\index{process\_chunks@{process\_chunks}!parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{process\_chunks()}{process\_chunks()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
static void \mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor}{parallel\+\_\+chunk\+::\+Parallel\+Chunk\+Processor}}$<$ T $>$\+::process\+\_\+chunks (\begin{DoxyParamCaption}\item[{std\+::vector$<$ std\+::vector$<$ T $>$ $>$ \&}]{chunks,  }\item[{\mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor_a23bb62ea1badf84f9595eae0edd5dec5}{Chunk\+Operation}}}]{operation,  }\item[{size\+\_\+t}]{num\+\_\+threads = {\ttfamily std\+:\+:thread\+:\+:hardware\+\_\+concurrency()} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Process chunks in parallel. 


\begin{DoxyParams}{Parameters}
{\em chunks} & Vector of chunks to process \\
\hline
{\em operation} & Operation to apply to each chunk \\
\hline
{\em num\+\_\+threads} & Number of threads to use (default\+: hardware concurrency) \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{parallel__chunk_8hpp_source_l00027}{27}} of file \mbox{\hyperlink{parallel__chunk_8hpp_source}{parallel\+\_\+chunk.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ std::vector<std::future<void>>\ futures;}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ chunks\_per\_thread\ =\ (chunks.size()\ +\ num\_threads\ -\/\ 1)\ /\ num\_threads;}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ chunks.size();\ i\ +=\ chunks\_per\_thread)\ \{}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ end\ =\ std::min(i\ +\ chunks\_per\_thread,\ chunks.size());}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ futures.push\_back(std::async(std::launch::async,\ [\&,\ i,\ end]()\ \{}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ j\ =\ i;\ j\ <\ end;\ ++j)\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ operation(chunks[j]);}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \}));}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ future\ :\ futures)\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ future.wait();}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00044\ \ \ \ \ \}}

\end{DoxyCode}


Referenced by \mbox{\hyperlink{main_8cpp_source_l00048}{main()}}.

\Hypertarget{classparallel__chunk_1_1ParallelChunkProcessor_a25c4f81d28c25048dd9845178284a76a}\label{classparallel__chunk_1_1ParallelChunkProcessor_a25c4f81d28c25048dd9845178284a76a} 
\index{parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}!reduce@{reduce}}
\index{reduce@{reduce}!parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{reduce()}{reduce()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
static T \mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor}{parallel\+\_\+chunk\+::\+Parallel\+Chunk\+Processor}}$<$ T $>$\+::reduce (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ std\+::vector$<$ T $>$ $>$ \&}]{chunks,  }\item[{std\+::function$<$ T(const T \&, const T \&)$>$}]{operation,  }\item[{T}]{initial }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Reduce chunks in parallel. 


\begin{DoxyParams}{Parameters}
{\em chunks} & Input chunks \\
\hline
{\em operation} & Reduction operation \\
\hline
{\em initial} & Initial value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Reduced value 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{parallel__chunk_8hpp_source_l00080}{80}} of file \mbox{\hyperlink{parallel__chunk_8hpp_source}{parallel\+\_\+chunk.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ std::vector<std::future<T>>\ futures;}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ chunk\ :\ chunks)\ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ futures.push\_back(std::async(std::launch::async,\ [\&]()\ \{}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::accumulate(chunk.begin(),\ chunk.end(),\ T(),\ operation);}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ \}));}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ T\ result\ =\ initial;}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ future\ :\ futures)\ \{}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ operation(result,\ future.get());}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00096\ \ \ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/\mbox{\hyperlink{parallel__chunk_8hpp}{parallel\+\_\+chunk.\+hpp}}\end{DoxyCompactItemize}
