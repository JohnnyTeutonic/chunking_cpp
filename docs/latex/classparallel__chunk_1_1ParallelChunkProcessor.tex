\doxysection{parallel\+\_\+chunk\+::Parallel\+Chunk\+Processor\texorpdfstring{$<$}{<} T \texorpdfstring{$>$}{>} Class Template Reference}
\hypertarget{classparallel__chunk_1_1ParallelChunkProcessor}{}\label{classparallel__chunk_1_1ParallelChunkProcessor}\index{parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}}


Parallel chunk processor for concurrent operations.  




{\ttfamily \#include $<$parallel\+\_\+chunk.\+hpp$>$}

\doxysubsubsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
using \mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor_a23bb62ea1badf84f9595eae0edd5dec5}{Chunk\+Operation}} = std\+::function$<$ void(std\+::vector$<$ T $>$ \&)$>$
\end{DoxyCompactItemize}
\doxysubsubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename U $>$ }\\static std\+::vector$<$ std\+::vector$<$ U $>$ $>$ \mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor_a1a5189644af96de911c983b816fa9532}{map}} (const std\+::vector$<$ std\+::vector$<$ T $>$ $>$ \&chunks, std\+::function$<$ U(const T \&)$>$ operation)
\begin{DoxyCompactList}\small\item\em Map operation over chunks in parallel. \end{DoxyCompactList}\item 
static void \mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor_a92eeb252a9c4d67a911d3c764802d260}{process\+\_\+chunks}} (std\+::vector$<$ std\+::vector$<$ T $>$ $>$ \&chunks, const std\+::function$<$ void(std\+::vector$<$ T $>$ \&)$>$ \&operation)
\begin{DoxyCompactList}\small\item\em Process chunks in parallel. \end{DoxyCompactList}\item 
static T \mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor_a25c4f81d28c25048dd9845178284a76a}{reduce}} (const std\+::vector$<$ std\+::vector$<$ T $>$ $>$ \&chunks, std\+::function$<$ T(const T \&, const T \&)$>$ operation, T initial)
\begin{DoxyCompactList}\small\item\em Reduce chunks in parallel. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$typename T$>$\newline
class parallel\+\_\+chunk\+::\+Parallel\+Chunk\+Processor$<$ T $>$}
Parallel chunk processor for concurrent operations. 


\begin{DoxyTemplParams}{Template Parameters}
{\em T} & The type of elements to process \\
\hline
\end{DoxyTemplParams}


Definition at line \mbox{\hyperlink{parallel__chunk_8hpp_source_l00019}{19}} of file \mbox{\hyperlink{parallel__chunk_8hpp_source}{parallel\+\_\+chunk.\+hpp}}.



\doxysubsection{Member Typedef Documentation}
\Hypertarget{classparallel__chunk_1_1ParallelChunkProcessor_a23bb62ea1badf84f9595eae0edd5dec5}\label{classparallel__chunk_1_1ParallelChunkProcessor_a23bb62ea1badf84f9595eae0edd5dec5} 
\index{parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}!ChunkOperation@{ChunkOperation}}
\index{ChunkOperation@{ChunkOperation}!parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{ChunkOperation}{ChunkOperation}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
using \mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor}{parallel\+\_\+chunk\+::\+Parallel\+Chunk\+Processor}}$<$ T $>$\+::\+Chunk\+Operation =  std\+::function$<$void(std\+::vector$<$T$>$\&)$>$}



Definition at line \mbox{\hyperlink{parallel__chunk_8hpp_source_l00021}{21}} of file \mbox{\hyperlink{parallel__chunk_8hpp_source}{parallel\+\_\+chunk.\+hpp}}.



\doxysubsection{Member Function Documentation}
\Hypertarget{classparallel__chunk_1_1ParallelChunkProcessor_a1a5189644af96de911c983b816fa9532}\label{classparallel__chunk_1_1ParallelChunkProcessor_a1a5189644af96de911c983b816fa9532} 
\index{parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}!map@{map}}
\index{map@{map}!parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{map()}{map()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
template$<$typename U $>$ \\
static std\+::vector$<$ std\+::vector$<$ U $>$ $>$ \mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor}{parallel\+\_\+chunk\+::\+Parallel\+Chunk\+Processor}}$<$ T $>$\+::map (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ std\+::vector$<$ T $>$ $>$ \&}]{chunks,  }\item[{std\+::function$<$ U(const T \&)$>$}]{operation }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Map operation over chunks in parallel. 


\begin{DoxyParams}{Parameters}
{\em chunks} & Input chunks \\
\hline
{\em operation} & Mapping operation \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Transformed chunks 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{parallel__chunk_8hpp_source_l00064}{64}} of file \mbox{\hyperlink{parallel__chunk_8hpp_source}{parallel\+\_\+chunk.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ std::vector<std::vector<U>>\ result(chunks.size());}
\DoxyCodeLine{00067\ \ \ \ \ \ \ \ \ std::vector<std::future<void>>\ futures;}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{size\_t}\ i\ =\ 0;\ i\ <\ chunks.size();\ ++i)\ \{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \ \ \ \ futures.push\_back(std::async(std::launch::async,\ [\&,\ i]()\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ result[i].reserve(chunks[i].size());}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::transform(chunks[i].begin(),\ chunks[i].end(),\ std::back\_inserter(result[i]),}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ operation);}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \}));}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ future\ :\ futures)\ \{}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \ \ \ \ future.wait();}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00082\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classparallel__chunk_1_1ParallelChunkProcessor_a92eeb252a9c4d67a911d3c764802d260}\label{classparallel__chunk_1_1ParallelChunkProcessor_a92eeb252a9c4d67a911d3c764802d260} 
\index{parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}!process\_chunks@{process\_chunks}}
\index{process\_chunks@{process\_chunks}!parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{process\_chunks()}{process\_chunks()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
static void \mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor}{parallel\+\_\+chunk\+::\+Parallel\+Chunk\+Processor}}$<$ T $>$\+::process\+\_\+chunks (\begin{DoxyParamCaption}\item[{std\+::vector$<$ std\+::vector$<$ T $>$ $>$ \&}]{chunks,  }\item[{const std\+::function$<$ void(std\+::vector$<$ T $>$ \&)$>$ \&}]{operation }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Process chunks in parallel. 


\begin{DoxyParams}{Parameters}
{\em chunks} & Vector of chunks to process \\
\hline
{\em operation} & Operation to apply to each chunk \\
\hline
{\em num\+\_\+threads} & Number of threads to use (default\+: hardware concurrency) \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{parallel__chunk_8hpp_source_l00029}{29}} of file \mbox{\hyperlink{parallel__chunk_8hpp_source}{parallel\+\_\+chunk.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ std::mutex\ exception\_mutex;}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ std::exception\_ptr\ exception\_ptr\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ std::vector<std::thread>\ threads;}
\DoxyCodeLine{00034\ }
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ chunk\ :\ chunks)\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ \ \ \ \ threads.emplace\_back([\&chunk,\ \&operation,\ \&exception\_mutex,\ \&exception\_ptr]()\ \{}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{try}\ \{}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ operation(chunk);}
\DoxyCodeLine{00039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{catch}\ (...)\ \{}
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ std::lock\_guard<std::mutex>\ lock(exception\_mutex);}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!exception\_ptr)\ \{}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ exception\_ptr\ =\ std::current\_exception();}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \ \ \ \ \});}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ thread\ :\ threads)\ \{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \ \ \ \ thread.join();}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (exception\_ptr)\ \{}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \ \ \ \ std::rethrow\_exception(exception\_ptr);}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00055\ \ \ \ \ \}}

\end{DoxyCode}
\Hypertarget{classparallel__chunk_1_1ParallelChunkProcessor_a25c4f81d28c25048dd9845178284a76a}\label{classparallel__chunk_1_1ParallelChunkProcessor_a25c4f81d28c25048dd9845178284a76a} 
\index{parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}!reduce@{reduce}}
\index{reduce@{reduce}!parallel\_chunk::ParallelChunkProcessor$<$ T $>$@{parallel\_chunk::ParallelChunkProcessor$<$ T $>$}}
\doxysubsubsection{\texorpdfstring{reduce()}{reduce()}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
static T \mbox{\hyperlink{classparallel__chunk_1_1ParallelChunkProcessor}{parallel\+\_\+chunk\+::\+Parallel\+Chunk\+Processor}}$<$ T $>$\+::reduce (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ std\+::vector$<$ T $>$ $>$ \&}]{chunks,  }\item[{std\+::function$<$ T(const T \&, const T \&)$>$}]{operation,  }\item[{T}]{initial }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Reduce chunks in parallel. 


\begin{DoxyParams}{Parameters}
{\em chunks} & Input chunks \\
\hline
{\em operation} & Reduction operation \\
\hline
{\em initial} & Initial value \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Reduced value 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{parallel__chunk_8hpp_source_l00091}{91}} of file \mbox{\hyperlink{parallel__chunk_8hpp_source}{parallel\+\_\+chunk.\+hpp}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ std::vector<std::future<T>>\ futures;}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ chunk\ :\ chunks)\ \{}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \ \ \ \ futures.push\_back(std::async(std::launch::async,\ [\&]()\ \{}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ std::accumulate(chunk.begin(),\ chunk.end(),\ T(),\ operation);}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \}));}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ T\ result\ =\ initial;}
\DoxyCodeLine{00102\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{auto}\&\ future\ :\ futures)\ \{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \ \ \ \ result\ =\ operation(result,\ future.get());}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{00107\ \ \ \ \ \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{parallel__chunk_8hpp}{parallel\+\_\+chunk.\+hpp}}\end{DoxyCompactItemize}
